#!/bin/bash

set -e

REPO_ROOT="${BASH_SOURCE%/*}"

source "$REPO_ROOT/bin/common"

log_info "Installing TypeScript"

yarn --frozen-lockfile --no-default-rc --no-progress --silent

log_info "Cleaning"

rm -r "$REPO_ROOT"/lib/*

log_info "Building"

tsc

log_info "Running main"

node "$REPO_ROOT/lib/src/main.js" "$@"
